---
title: "Remix: Visualizing TypeScript Dependencies"
emoji: "ðŸ’¿"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["remix", "typescript", "dependencies", "react"]
published: false
---
ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦ã€‚

Rust / Go ã§ä¾å­˜é–¢ä¿‚ã‚’èª¿ã¹ã¦ã„ãŸã€‚

ãã®ä¸­ã§ã€TypeScript ã®ä¾å­˜é–¢ä¿‚ã‚’å¯è¦–åŒ–ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è€ƒãˆãŸã€‚

[dependency-cruiser](https://github.com/sverweij/dependency-cruiser) ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚

https://github.com/sverweij/dependency-cruiser

ã“ã‚Œã§ã€TypeScript ã®ä¾å­˜é–¢ä¿‚ã‚’å¯è¦–åŒ–ã§ãã‚‹ã€‚

CI ã«çµ„ã¿è¾¼ã‚“ã§ãŠã‘ã°ã€èªçŸ¥è² è·ã‚’ä¸‹ã’ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚

å®Ÿéš›ã«ä½œæˆã—ãŸ Project ã¯ã“ã‚Œã€‚

https://github.com/danny-yamamoto/my-portfolio-remix-v2

## Installation
```bash
npm i -D dependency-cruiser
npx depcruise --init
```

## Initialize
å®šç¾©ã‚’ä½œæˆã™ã‚‹ã€‚

```bash
node âžœ /workspaces/my-portfolio-remix-v2 (main) $ npx depcruise --init
âœ” It looks like this is an ESM package. Is that correct? â€¦ yes
âœ” Where do your source files live? â€¦ app
âœ” Do your test files live in a separate folder? â€¦ no
âœ” Looks like you're using a 'tsconfig.json'. Use that? â€¦ yes
âœ” Full path to your 'tsconfig.json â€º tsconfig.json
âœ” Also regard TypeScript dependencies that exist only before compilation? â€¦ no

  âœ” Successfully created '.dependency-cruiser.cjs'

npm notice 
npm notice New major version of npm available! 9.8.1 -> 10.2.4
npm notice Changelog: https://github.com/npm/cli/releases/tag/v10.2.4
npm notice Run npm install -g npm@10.2.4 to update!
npm notice 
node âžœ /workspaces/my-portfolio-remix-v2 (main)
```

```bash
node âžœ /workspaces/my-portfolio-remix-v2 (main) $ npx depcruise --include-only "^app"  --config .dependency-cruiser.cjs .

  warn no-orphans: app/routes/portfolio._index.tsx
  warn no-orphans: app/routes/_index.tsx
  warn no-orphans: app/root.tsx
  warn no-orphans: app/entry.server.tsx
  warn no-orphans: app/entry.client.tsx

âœ˜ 5 dependency violations (0 errors, 5 warnings). 15 modules, 5 dependencies cruised.

node âžœ /workspaces/my-portfolio-remix-v2 (main) $
```

## Visualization
```bash
node âžœ /workspaces/my-portfolio-remix-v2 (main) $ npx depcruise --config -x "^(build|functions|node_modules|public)" .dependency-cruiser.cjs . --output-type mermaid > depcruise.md
```

markdown ã§è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã§ `mermaid` ã‚’æŒ‡å®šã™ã‚‹ã€‚
```diff
+```mermaid
flowchart LR

0[".dependency-cruiser.cjs"]
1[".eslintrc.cjs"]
subgraph 2["app"]
subgraph 3["components"]
4["Footer.tsx"]
end
5["entry.client.tsx"]
6["entry.server.tsx"]
7["root.tsx"]
subgraph 8["routes"]
9["_index.tsx"]
A["portfolio._index.tsx"]
B["portfolio.articles.tsx"]
E["portfolio.certificates.tsx"]
G["portfolio.experience.tsx"]
I["portfolio.tsx"]
end
subgraph C["utils"]
D["articles.server.tsx"]
F["certificates.server.tsx"]
H["experience.server.tsx"]
end
J["index.css"]
K["types.ts"]
end
L["remix.config.js"]
M["remix.env.d.ts"]
N["server.ts"]
B-->D
E-->F
G-->H
I-->J
I-->4
+ ```
```

## Open Preview
å®Œæˆã€‚

```mermaid
flowchart LR

0[".dependency-cruiser.cjs"]
1[".eslintrc.cjs"]
subgraph 2["app"]
subgraph 3["components"]
4["Footer.tsx"]
end
5["entry.client.tsx"]
6["entry.server.tsx"]
7["root.tsx"]
subgraph 8["routes"]
9["_index.tsx"]
A["portfolio._index.tsx"]
B["portfolio.articles.tsx"]
E["portfolio.certificates.tsx"]
G["portfolio.experience.tsx"]
I["portfolio.tsx"]
end
subgraph C["utils"]
D["articles.server.tsx"]
F["certificates.server.tsx"]
H["experience.server.tsx"]
end
J["index.css"]
K["types.ts"]
end
L["remix.config.js"]
M["remix.env.d.ts"]
N["server.ts"]
B-->D
E-->F
G-->H
I-->J
I-->4
```

https://github.com/danny-yamamoto/my-portfolio-remix-v2/blob/main/depcruise.md
